<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Acid Metal Art Collective</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700;900&family=Noto+Serif+TC:wght@400;700;900&family=Orbitron:wght@400;700;900&family=Space+Mono:ital,wght@0,400;0,700;1,400;1,700&family=Syncopate:wght@400;700&family=Bebas+Neue&family=Playfair+Display:wght@400;700;900&family=Montserrat:wght@300;400;700;900&display=swap" rel="stylesheet">
  <style>
    body {
      background-color: #050505;
      color: #fff;
      overflow-x: hidden;
      font-family: 'Space Mono', monospace;
    }
    .acid-font { font-family: 'Syncopate', sans-serif; }
    .display-font { font-family: 'Orbitron', sans-serif; }

    .liquid-metal { filter: url('#liquid-goo'); }

    @keyframes float {
      0% { transform: translate(0, 0) scale(1); }
      33% { transform: translate(30px, -50px) scale(1.1); }
      66% { transform: translate(-20px, 20px) scale(0.9); }
      100% { transform: translate(0, 0) scale(1); }
    }

    .blob {
      position: absolute;
      background: linear-gradient(135deg, #e0e0e0 0%, #a1a1a1 50%, #4a4a4a 100%);
      border-radius: 50%;
      mix-blend-mode: exclusion;
      animation: float 10s infinite ease-in-out;
    }

    .glass-morphism {
      background: rgba(255, 255, 255, 0.03);
      backdrop-filter: blur(12px);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    ::-webkit-scrollbar { width: 4px; }
    ::-webkit-scrollbar-track { background: #000; }
    ::-webkit-scrollbar-thumb { background: #333; border-radius: 10px; }

    .editable-element {
      position: relative;
      transition: all 0.2s ease;
    }
    .edit-mode .editable-element {
      cursor: pointer;
    }
    .edit-mode .editable-element:hover {
      outline: 2px dashed rgba(59, 130, 246, 0.5);
      outline-offset: 4px;
    }
    .editable-element.selected {
      outline: 2px solid #3b82f6 !important;
      outline-offset: 4px;
    }

    .floating-toolbar {
      position: fixed;
      background: rgba(24, 24, 27, 0.98);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      padding: 12px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.5);
      z-index: 1000;
      min-width: 320px;
      max-height: 80vh;
      overflow-y: auto;
    }

    .color-picker-wrap input[type="color"] {
      -webkit-appearance: none;
      width: 32px;
      height: 32px;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      padding: 0;
    }
    .color-picker-wrap input[type="color"]::-webkit-color-swatch-wrapper {
      padding: 0;
    }
    .color-picker-wrap input[type="color"]::-webkit-color-swatch {
      border: 2px solid rgba(255,255,255,0.2);
      border-radius: 50%;
    }

    .edit-mode-banner {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background: linear-gradient(90deg, #3b82f6, #8b5cf6);
      color: white;
      padding: 8px 16px;
      font-size: 12px;
      font-weight: bold;
      text-align: center;
      z-index: 999;
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 16px;
      flex-wrap: wrap;
    }

    @keyframes pulse-border {
      0%, 100% { box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.4); }
      50% { box-shadow: 0 0 0 8px rgba(59, 130, 246, 0); }
    }
    .pulse-hint {
      animation: pulse-border 2s infinite;
    }

    /* Device Preview Mode */
    .mobile-preview-container {
      max-width: 430px;
      margin: 0 auto;
      border: 3px solid #333;
      border-radius: 24px;
      overflow: hidden;
      box-shadow: 0 0 60px rgba(0,0,0,0.8);
    }

    .device-switcher {
      display: flex;
      gap: 4px;
      background: rgba(0,0,0,0.5);
      padding: 4px;
      border-radius: 8px;
    }
    .device-switcher button {
      padding: 6px 12px;
      border-radius: 6px;
      font-size: 10px;
      font-weight: bold;
      transition: all 0.2s;
    }
    .device-switcher button.active {
      background: white;
      color: black;
    }
    .device-switcher button:not(.active) {
      background: transparent;
      color: white;
      border: 1px solid rgba(255,255,255,0.2);
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <svg xmlns="http://www.w3.org/2000/svg" version="1.1" style="display:none;">
    <defs>
      <filter id="liquid-goo">
        <feGaussianBlur in="SourceGraphic" stdDeviation="15" result="blur" />
        <feColorMatrix in="blur" mode="matrix" values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 25 -10" result="goo" />
        <feComposite in="SourceGraphic" in2="goo" operator="atop" />
      </filter>
    </defs>
  </svg>

  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <script type="text/babel" data-presets="react">
    const { useState, useEffect, useRef, useCallback } = React;

    // Font Options
    const FONTS = {
      display: [
        { name: 'Orbitron', label: 'Orbitron (ÁßëÊäÄ)' },
        { name: 'Syncopate', label: 'Syncopate (ÈÖ∏ÊÄß)' },
        { name: 'Bebas Neue', label: 'Bebas Neue (Á≤óÈ´î)' },
        { name: 'Playfair Display', label: 'Playfair (ÂÑ™ÈõÖ)' },
        { name: 'Montserrat', label: 'Montserrat (Áèæ‰ª£)' },
      ],
      chinese: [
        { name: 'Noto Sans TC', label: 'ÊÄùÊ∫êÈªëÈ´î' },
        { name: 'Noto Serif TC', label: 'ÊÄùÊ∫êÂÆãÈ´î' },
      ]
    };

    // Helper to create element style config
    const createElementStyle = (fontSize, fontFamily, fontFamilyZh, color, offsetX = 0, offsetY = 0, textEffect = 'none', bgColor = null) => ({
      fontSize, fontFamily, fontFamilyZh, color, offsetX, offsetY, textEffect, ...(bgColor && { bgColor })
    });

    // Default Configuration - NEW STRUCTURE
    // texts: shared between desktop/mobile
    // desktop/mobile: independent layout configs
    const DEFAULT_CONFIG = {
      // Shared text content
      texts: {
        navBrand: { en: "LIQUID_METALS_COLL", zh: "Ê∂≤ÊÖãÈáëÂ±¨ÈõÜÈ´î" },
        navLink1: { en: "Archive", zh: "Â∞ÅÂ≠ò" },
        navLink2: { en: "Fragments", zh: "Á¢éÁâá" },
        heroTitle: { en: "METALMORPHOSIS", zh: "ÈáëÂ±¨ËõªËÆä" },
        heroSubtitle: { en: "A LIQUID ODYSSEY IN DIGITAL CHROME", zh: "Êï∏‰ΩçÈâªÂêàÈáë‰∏≠ÁöÑÊ∂≤ÊÖãÂ•ßÂæ∑Ë≥Ω" },
        orderTitle: { en: "ACQUISITION PORTAL", zh: "Áç≤ÂèñÂÇ≥ÈÄÅÈñÄ" },
        orderDescription: { en: "Secure your place in the collective. Each piece is generated via neural fluid simulations and serialized on-chain.", zh: "Á¢∫‰øùÊÇ®Âú®ÈõÜÈ´î‰∏≠ÁöÑ‰ΩçÁΩÆ„ÄÇÊØè‰ª∂‰ΩúÂìÅÈÉΩÈÄöÈÅéÁ•ûÁ∂ìÊµÅÈ´îÊ®°Êì¨ÁîüÊàêÔºå‰∏¶Âú®Èèà‰∏äÂ∫èÂàóÂåñ„ÄÇ" },
        ctaButton: { en: "RESERVE FRAGMENT", zh: "È†êÁ¥ÑÁ¢éÁâá" },
        footerBrand: { en: "ACID_LABS ¬© 2024", zh: "ACID_LABS ¬© 2024" },
        footerDescription: { en: "Explorations in digital materiality and neural aesthetics. Built on the edge of the void.", zh: "Êé¢Á¥¢Êï∏‰ΩçÁâ©Ë≥™ÊÄßËàáÁ•ûÁ∂ìÁæéÂ≠∏„ÄÇÂª∫Á´ãÂú®ËôõÁ©∫ÁöÑÈÇäÁ∑£„ÄÇ" },
        footerLink1: { en: "Manifesto", zh: "ÂÆ£Ë®Ä" },
        footerLink2: { en: "Whitepaper", zh: "ÁôΩÁöÆÊõ∏" },
        footerLink3: { en: "Discord", zh: "Discord" },
        footerLink4: { en: "Privacy", zh: "Èö±ÁßÅ" },
        footerLink5: { en: "Terms", zh: "Ê¢ùÊ¨æ" },
        footerLink6: { en: "Contract", zh: "ÂêàÁ¥Ñ" }
      },

      // Desktop Layout Config
      desktop: {
        elements: {
          navBrand: createElementStyle(14, 'Orbitron', 'Noto Sans TC', '#ffffff'),
          navLink1: createElementStyle(10, 'Space Mono', 'Noto Sans TC', '#71717a'),
          navLink2: createElementStyle(10, 'Space Mono', 'Noto Sans TC', '#71717a'),
          heroTitle: createElementStyle(96, 'Syncopate', 'Noto Sans TC', '#00FF41', 0, 0, 'chrometype'),
          heroSubtitle: createElementStyle(14, 'Orbitron', 'Noto Sans TC', '#a1a1aa'),
          orderTitle: createElementStyle(32, 'Syncopate', 'Noto Sans TC', '#00FF41'),
          orderDescription: createElementStyle(14, 'Space Mono', 'Noto Sans TC', '#a1a1aa'),
          ctaButton: createElementStyle(12, 'Space Mono', 'Noto Sans TC', '#000000', 0, 0, 'none', '#FF00F5'),
          footerBrand: createElementStyle(12, 'Orbitron', 'Noto Sans TC', '#ffffff'),
          footerDescription: createElementStyle(10, 'Space Mono', 'Noto Sans TC', '#a1a1aa'),
          footerLink1: createElementStyle(10, 'Space Mono', 'Noto Sans TC', '#a1a1aa'),
          footerLink2: createElementStyle(10, 'Space Mono', 'Noto Sans TC', '#a1a1aa'),
          footerLink3: createElementStyle(10, 'Space Mono', 'Noto Sans TC', '#a1a1aa'),
          footerLink4: createElementStyle(10, 'Space Mono', 'Noto Sans TC', '#a1a1aa'),
          footerLink5: createElementStyle(10, 'Space Mono', 'Noto Sans TC', '#a1a1aa'),
          footerLink6: createElementStyle(10, 'Space Mono', 'Noto Sans TC', '#a1a1aa')
        },
        layout: {
          mediaUrl: "https://picsum.photos/1200/800",
          isMediaVideo: false,
          videoScale: 100,
          videoOffsetX: 0,
          videoOffsetY: 0,
          frameWidth: 100,
          frameAspectRatio: "21/9"
        }
      },

      // Mobile Layout Config
      mobile: {
        elements: {
          navBrand: createElementStyle(11, 'Orbitron', 'Noto Sans TC', '#ffffff'),
          navLink1: createElementStyle(9, 'Space Mono', 'Noto Sans TC', '#71717a'),
          navLink2: createElementStyle(9, 'Space Mono', 'Noto Sans TC', '#71717a'),
          heroTitle: createElementStyle(36, 'Syncopate', 'Noto Sans TC', '#00FF41', 0, 0, 'chrometype'),
          heroSubtitle: createElementStyle(10, 'Orbitron', 'Noto Sans TC', '#a1a1aa'),
          orderTitle: createElementStyle(20, 'Syncopate', 'Noto Sans TC', '#00FF41'),
          orderDescription: createElementStyle(12, 'Space Mono', 'Noto Sans TC', '#a1a1aa'),
          ctaButton: createElementStyle(10, 'Space Mono', 'Noto Sans TC', '#000000', 0, 0, 'none', '#FF00F5'),
          footerBrand: createElementStyle(10, 'Orbitron', 'Noto Sans TC', '#ffffff'),
          footerDescription: createElementStyle(9, 'Space Mono', 'Noto Sans TC', '#a1a1aa'),
          footerLink1: createElementStyle(9, 'Space Mono', 'Noto Sans TC', '#a1a1aa'),
          footerLink2: createElementStyle(9, 'Space Mono', 'Noto Sans TC', '#a1a1aa'),
          footerLink3: createElementStyle(9, 'Space Mono', 'Noto Sans TC', '#a1a1aa'),
          footerLink4: createElementStyle(9, 'Space Mono', 'Noto Sans TC', '#a1a1aa'),
          footerLink5: createElementStyle(9, 'Space Mono', 'Noto Sans TC', '#a1a1aa'),
          footerLink6: createElementStyle(9, 'Space Mono', 'Noto Sans TC', '#a1a1aa')
        },
        layout: {
          mediaUrl: "https://picsum.photos/1200/800",
          isMediaVideo: false,
          videoScale: 100,
          videoOffsetX: 0,
          videoOffsetY: 0,
          frameWidth: 100,
          frameAspectRatio: "16/9"
        }
      },

      // Shared artwork info
      artwork: {
        price: 0.85,
        edition: "01/50"
      }
    };  // END DEFAULT_CONFIG

    // Liquid Background Component
    const LiquidBackground = () => (
      <div className="fixed inset-0 z-[-1] overflow-hidden pointer-events-none">
        <div className="absolute inset-0 bg-black opacity-90"></div>
        <div className="liquid-metal w-full h-full relative opacity-40">
          <div className="blob w-[400px] h-[400px] top-[10%] left-[10%] bg-white/20 blur-xl"></div>
          <div className="blob w-[500px] h-[500px] top-[40%] left-[50%] bg-zinc-400/30 blur-2xl" style={{ animationDelay: '-2s' }}></div>
          <div className="blob w-[350px] h-[350px] bottom-[10%] right-[20%] bg-zinc-600/40 blur-xl" style={{ animationDelay: '-5s' }}></div>
          <div className="blob w-[600px] h-[600px] top-[-10%] right-[-10%] bg-zinc-200/10 blur-3xl" style={{ animationDelay: '-7s' }}></div>
        </div>
        <div className="absolute inset-0 opacity-[0.03] pointer-events-none bg-[url('https://grainy-gradients.vercel.app/noise.svg')]"></div>
      </div>
    );

    // Floating Toolbar Component
    const FloatingToolbar = ({ elementKey, config, deviceMode, updateElement, updateText, position, onClose, lang }) => {
      const toolbarRef = useRef(null);
      const deviceConfig = config[deviceMode];
      const styleData = deviceConfig.elements[elementKey];
      const textData = config.texts[elementKey];
      const isZh = lang === 'zh';

      const handleStyleChange = (key, value) => {
        updateElement(deviceMode, elementKey, { ...styleData, [key]: value });
      };

      const handleTextChange = (langKey, value) => {
        updateText(elementKey, { ...textData, [langKey]: value });
      };

      const [adjustedPos, setAdjustedPos] = useState(position);

      useEffect(() => {
        if (toolbarRef.current) {
          const rect = toolbarRef.current.getBoundingClientRect();
          let newX = position.x;
          let newY = position.y;

          if (position.x + rect.width > window.innerWidth - 20) {
            newX = window.innerWidth - rect.width - 20;
          }
          if (position.y + rect.height > window.innerHeight - 20) {
            newY = position.y - rect.height - 20;
          }
          if (newY < 80) newY = 80;

          setAdjustedPos({ x: Math.max(20, newX), y: newY });
        }
      }, [position]);

      return (
        <div
          ref={toolbarRef}
          className="floating-toolbar"
          style={{ left: adjustedPos.x, top: adjustedPos.y }}
          onClick={e => e.stopPropagation()}
        >
          <div className="flex justify-between items-center mb-3 pb-2 border-b border-zinc-700">
            <div>
              <span className="text-xs font-bold text-zinc-400 uppercase tracking-wider">Á∑®ËºØÂÖÉÁ¥†</span>
              <span className="ml-2 text-[10px] px-2 py-0.5 rounded bg-purple-600 text-white">
                {deviceMode === 'desktop' ? 'ÈõªËÖ¶Áâà' : 'ÊâãÊ©üÁâà'}
              </span>
            </div>
            <button onClick={onClose} className="text-zinc-500 hover:text-white text-lg leading-none">&times;</button>
          </div>

          {/* Text Content - Shared */}
          <div className="mb-4 p-3 bg-green-900/20 border border-green-700/30 rounded">
            <label className="text-[10px] text-green-400 block mb-1">üìù ÊñáÂ≠óÂÖßÂÆπ (ÂÖ±Áî®ÊñºÂÖ©ÁâàÊú¨)</label>
            <div className="space-y-2">
              <div>
                <label className="text-[9px] text-zinc-500">English</label>
                <textarea
                  value={textData.en}
                  onChange={e => handleTextChange('en', e.target.value)}
                  className="w-full bg-black/60 border border-zinc-700 rounded px-3 py-2 text-sm focus:outline-none focus:border-green-500 resize-none"
                  rows={1}
                />
              </div>
              <div>
                <label className="text-[9px] text-zinc-500">‰∏≠Êñá</label>
                <textarea
                  value={textData.zh}
                  onChange={e => handleTextChange('zh', e.target.value)}
                  className="w-full bg-black/60 border border-zinc-700 rounded px-3 py-2 text-sm focus:outline-none focus:border-green-500 resize-none"
                  rows={1}
                />
              </div>
            </div>
          </div>

          {/* Style Settings - Device Specific */}
          <div className="mb-3 p-3 bg-blue-900/20 border border-blue-700/30 rounded">
            <label className="text-[10px] text-blue-400 block mb-2">üé® Ê®£ÂºèË®≠ÂÆö (ÂÉÖ {deviceMode === 'desktop' ? 'ÈõªËÖ¶Áâà' : 'ÊâãÊ©üÁâà'})</label>

            {/* Font Size & Color */}
            <div className="grid grid-cols-2 gap-3 mb-3">
              <div>
                <label className="text-[10px] text-zinc-500 block mb-1">Â≠óÈ´îÂ§ßÂ∞è</label>
                <div className="flex items-center gap-2">
                  <input
                    type="range"
                    min="8"
                    max="150"
                    value={styleData.fontSize}
                    onChange={e => handleStyleChange('fontSize', parseInt(e.target.value))}
                    className="flex-1 accent-blue-500"
                  />
                  <span className="text-xs text-zinc-400 w-8">{styleData.fontSize}</span>
                </div>
              </div>
              <div>
                <label className="text-[10px] text-zinc-500 block mb-1">È°èËâ≤</label>
                <div className="flex items-center gap-2 color-picker-wrap">
                  <input
                    type="color"
                    value={styleData.color}
                    onChange={e => handleStyleChange('color', e.target.value)}
                  />
                  <input
                    type="text"
                    value={styleData.color}
                    onChange={e => handleStyleChange('color', e.target.value)}
                    className="flex-1 bg-black/60 border border-zinc-700 rounded px-2 py-1 text-xs focus:outline-none focus:border-blue-500 uppercase w-20"
                  />
                </div>
              </div>
            </div>

            {/* Font Family */}
            <div className="grid grid-cols-2 gap-3 mb-3">
              <div>
                <label className="text-[10px] text-zinc-500 block mb-1">Ëã±ÊñáÂ≠óÈ´î</label>
                <select
                  value={styleData.fontFamily}
                  onChange={e => handleStyleChange('fontFamily', e.target.value)}
                  className="w-full bg-black/60 border border-zinc-700 rounded px-2 py-1.5 text-xs focus:outline-none focus:border-blue-500"
                >
                  {FONTS.display.map(f => (
                    <option key={f.name} value={f.name}>{f.label}</option>
                  ))}
                  <option value="Space Mono">Space Mono</option>
                </select>
              </div>
              <div>
                <label className="text-[10px] text-zinc-500 block mb-1">‰∏≠ÊñáÂ≠óÈ´î</label>
                <select
                  value={styleData.fontFamilyZh}
                  onChange={e => handleStyleChange('fontFamilyZh', e.target.value)}
                  className="w-full bg-black/60 border border-zinc-700 rounded px-2 py-1.5 text-xs focus:outline-none focus:border-blue-500"
                >
                  {FONTS.chinese.map(f => (
                    <option key={f.name} value={f.name}>{f.label}</option>
                  ))}
                </select>
              </div>
            </div>

            {/* Position Offset */}
            <div className="grid grid-cols-2 gap-3 mb-3">
              <div>
                <label className="text-[10px] text-zinc-500 block mb-1">X ‰ΩçÁßª</label>
                <div className="flex items-center gap-1">
                  <button
                    onClick={() => handleStyleChange('offsetX', styleData.offsetX - 10)}
                    className="px-2 py-1 bg-zinc-800 rounded hover:bg-zinc-700 text-xs"
                  >-10</button>
                  <input
                    type="number"
                    value={styleData.offsetX}
                    onChange={e => handleStyleChange('offsetX', parseInt(e.target.value) || 0)}
                    className="flex-1 bg-black/60 border border-zinc-700 rounded px-2 py-1 text-xs text-center focus:outline-none focus:border-blue-500 w-12"
                  />
                  <button
                    onClick={() => handleStyleChange('offsetX', styleData.offsetX + 10)}
                    className="px-2 py-1 bg-zinc-800 rounded hover:bg-zinc-700 text-xs"
                  >+10</button>
                </div>
              </div>
              <div>
                <label className="text-[10px] text-zinc-500 block mb-1">Y ‰ΩçÁßª</label>
                <div className="flex items-center gap-1">
                  <button
                    onClick={() => handleStyleChange('offsetY', styleData.offsetY - 10)}
                    className="px-2 py-1 bg-zinc-800 rounded hover:bg-zinc-700 text-xs"
                  >-10</button>
                  <input
                    type="number"
                    value={styleData.offsetY}
                    onChange={e => handleStyleChange('offsetY', parseInt(e.target.value) || 0)}
                    className="flex-1 bg-black/60 border border-zinc-700 rounded px-2 py-1 text-xs text-center focus:outline-none focus:border-blue-500 w-12"
                  />
                  <button
                    onClick={() => handleStyleChange('offsetY', styleData.offsetY + 10)}
                    className="px-2 py-1 bg-zinc-800 rounded hover:bg-zinc-700 text-xs"
                  >+10</button>
                </div>
              </div>
            </div>

            {/* Text Effect */}
            <div className="mb-3">
              <label className="text-[10px] text-zinc-500 block mb-1">ÊñáÂ≠óÁâπÊïà</label>
              <div className="flex gap-2">
                {['none', 'glow', 'chrometype', 'distort'].map(effect => (
                  <button
                    key={effect}
                    onClick={() => handleStyleChange('textEffect', effect)}
                    className={`flex-1 py-1.5 text-[10px] rounded border transition-all ${
                      styleData.textEffect === effect
                        ? 'bg-blue-600 border-blue-500 text-white'
                        : 'border-zinc-700 text-zinc-400 hover:border-zinc-500'
                    }`}
                  >
                    {effect === 'none' ? 'ÁÑ°' : effect === 'glow' ? 'ÁôºÂÖâ' : effect === 'chrometype' ? 'ÈáëÂ±¨' : 'Êâ≠Êõ≤'}
                  </button>
                ))}
              </div>
            </div>

            {/* Background Color for Button */}
            {elementKey === 'ctaButton' && (
              <div>
                <label className="text-[10px] text-zinc-500 block mb-1">ÊåâÈàïËÉåÊôØËâ≤</label>
                <div className="flex items-center gap-2 color-picker-wrap">
                  <input
                    type="color"
                    value={styleData.bgColor || '#FF00F5'}
                    onChange={e => handleStyleChange('bgColor', e.target.value)}
                  />
                  <input
                    type="text"
                    value={styleData.bgColor || '#FF00F5'}
                    onChange={e => handleStyleChange('bgColor', e.target.value)}
                    className="flex-1 bg-black/60 border border-zinc-700 rounded px-2 py-1 text-xs focus:outline-none focus:border-blue-500 uppercase"
                  />
                </div>
              </div>
            )}
          </div>
        </div>
      );
    };

    // Editable Text Component
    const EditableText = ({ elementKey, config, deviceMode, isEditMode, onSelect, isSelected, lang, as: Component = 'span', className = '', style = {} }) => {
      const ref = useRef(null);
      const deviceConfig = config[deviceMode];
      const styleData = deviceConfig.elements[elementKey];
      const textData = config.texts[elementKey];
      const isZh = lang === 'zh';
      const text = isZh ? textData.zh : textData.en;

      const getTextStyle = () => {
        const baseStyle = {
          fontSize: `${styleData.fontSize}px`,
          fontFamily: isZh ? styleData.fontFamilyZh : styleData.fontFamily,
          color: styleData.color,
          transform: `translate(${styleData.offsetX}px, ${styleData.offsetY}px)`,
          display: 'inline-block',
          ...style
        };

        if (styleData.textEffect === 'glow') {
          baseStyle.textShadow = `0 0 20px ${styleData.color}, 0 0 40px ${styleData.color}`;
        } else if (styleData.textEffect === 'chrometype') {
          baseStyle.background = `linear-gradient(to bottom, #fff 0%, ${styleData.color} 50%, #000 100%)`;
          baseStyle.WebkitBackgroundClip = 'text';
          baseStyle.WebkitTextFillColor = 'transparent';
          baseStyle.filter = 'drop-shadow(2px 2px 2px rgba(0,0,0,0.5)) contrast(1.5)';
        } else if (styleData.textEffect === 'distort') {
          baseStyle.fontStyle = 'italic';
          baseStyle.transform = `translate(${styleData.offsetX}px, ${styleData.offsetY}px) skew(-10deg)`;
        }

        return baseStyle;
      };

      const handleClick = (e) => {
        if (isEditMode) {
          e.stopPropagation();
          const rect = ref.current.getBoundingClientRect();
          onSelect(elementKey, { x: rect.left, y: rect.bottom + 10 });
        }
      };

      return (
        <Component
          ref={ref}
          className={`editable-element ${isSelected ? 'selected' : ''} ${isEditMode ? 'pulse-hint' : ''} ${className}`}
          style={getTextStyle()}
          onClick={handleClick}
        >
          {text}
        </Component>
      );
    };

    // Main App Component
    const App = () => {
      const [config, setConfig] = useState(DEFAULT_CONFIG);
      const [lang, setLang] = useState('en');
      const [isEditMode, setIsEditMode] = useState(false);
      const [isAuthModalOpen, setIsAuthModalOpen] = useState(false);
      const [passwordInput, setPasswordInput] = useState('');
      const [isAuthenticated, setIsAuthenticated] = useState(false);
      const [selectedElement, setSelectedElement] = useState(null);
      const [toolbarPosition, setToolbarPosition] = useState({ x: 0, y: 0 });
      const [isExportModalOpen, setIsExportModalOpen] = useState(false);
      const [deviceMode, setDeviceMode] = useState('desktop'); // 'desktop' or 'mobile'
      const [previewDevice, setPreviewDevice] = useState('desktop'); // for non-edit viewing

      // Detect actual device
      useEffect(() => {
        const checkDevice = () => {
          if (!isEditMode) {
            setPreviewDevice(window.innerWidth < 768 ? 'mobile' : 'desktop');
          }
        };
        checkDevice();
        window.addEventListener('resize', checkDevice);
        return () => window.removeEventListener('resize', checkDevice);
      }, [isEditMode]);

      // Load saved config
      useEffect(() => {
        const saved = localStorage.getItem('acid_config_v3');
        if (saved) {
          try {
            const parsed = JSON.parse(saved);
            setConfig(prev => ({ ...prev, ...parsed }));
          } catch (e) {
            console.error("Failed to load config", e);
          }
        }
      }, []);

      const activeDevice = isEditMode ? deviceMode : previewDevice;
      const deviceConfig = config[activeDevice];

      const handleAdminInit = () => {
        if (isAuthenticated) {
          setIsEditMode(true);
        } else {
          setIsAuthModalOpen(true);
        }
      };

      const handlePasswordSubmit = (e) => {
        e.preventDefault();
        if (passwordInput === 'drawme') {
          setIsAuthenticated(true);
          setIsEditMode(true);
          setIsAuthModalOpen(false);
          setPasswordInput('');
        } else {
          alert('ÂØÜÁ¢ºÈåØË™§');
        }
      };

      const handleElementSelect = (key, position) => {
        setSelectedElement(key);
        setToolbarPosition(position);
      };

      const handleCloseToolbar = () => {
        setSelectedElement(null);
      };

      const updateElement = (device, key, newData) => {
        setConfig(prev => ({
          ...prev,
          [device]: {
            ...prev[device],
            elements: { ...prev[device].elements, [key]: newData }
          }
        }));
      };

      const updateText = (key, newData) => {
        setConfig(prev => ({
          ...prev,
          texts: { ...prev.texts, [key]: newData }
        }));
      };

      const updateLayout = (device, newLayout) => {
        setConfig(prev => ({
          ...prev,
          [device]: {
            ...prev[device],
            layout: { ...prev[device].layout, ...newLayout }
          }
        }));
      };

      const saveConfig = () => {
        localStorage.setItem('acid_config_v3', JSON.stringify(config));
        alert('Ë®≠ÂÆöÂ∑≤ÂÑ≤Â≠òÔºÅ');
      };

      // Generate export code
      const generateExportCode = () => {
        const formatElementStyle = (el) => {
          let code = `createElementStyle(${el.fontSize}, '${el.fontFamily}', '${el.fontFamilyZh}', '${el.color}', ${el.offsetX}, ${el.offsetY}, '${el.textEffect}'`;
          if (el.bgColor) code += `, '${el.bgColor}'`;
          code += ')';
          return code;
        };

        let code = `    const DEFAULT_CONFIG = {\n`;

        // Texts
        code += `      texts: {\n`;
        Object.keys(config.texts).forEach((key, idx, arr) => {
          const t = config.texts[key];
          code += `        ${key}: { en: "${t.en}", zh: "${t.zh}" }${idx < arr.length - 1 ? ',' : ''}\n`;
        });
        code += `      },\n\n`;

        // Desktop
        code += `      desktop: {\n        elements: {\n`;
        Object.keys(config.desktop.elements).forEach((key, idx, arr) => {
          code += `          ${key}: ${formatElementStyle(config.desktop.elements[key])}${idx < arr.length - 1 ? ',' : ''}\n`;
        });
        code += `        },\n        layout: {\n`;
        const dl = config.desktop.layout;
        code += `          mediaUrl: "${dl.mediaUrl}",\n`;
        code += `          isMediaVideo: ${dl.isMediaVideo},\n`;
        code += `          videoScale: ${dl.videoScale},\n`;
        code += `          videoOffsetX: ${dl.videoOffsetX},\n`;
        code += `          videoOffsetY: ${dl.videoOffsetY},\n`;
        code += `          frameWidth: ${dl.frameWidth},\n`;
        code += `          frameAspectRatio: "${dl.frameAspectRatio}"\n`;
        code += `        }\n      },\n\n`;

        // Mobile
        code += `      mobile: {\n        elements: {\n`;
        Object.keys(config.mobile.elements).forEach((key, idx, arr) => {
          code += `          ${key}: ${formatElementStyle(config.mobile.elements[key])}${idx < arr.length - 1 ? ',' : ''}\n`;
        });
        code += `        },\n        layout: {\n`;
        const ml = config.mobile.layout;
        code += `          mediaUrl: "${ml.mediaUrl}",\n`;
        code += `          isMediaVideo: ${ml.isMediaVideo},\n`;
        code += `          videoScale: ${ml.videoScale},\n`;
        code += `          videoOffsetX: ${ml.videoOffsetX},\n`;
        code += `          videoOffsetY: ${ml.videoOffsetY},\n`;
        code += `          frameWidth: ${ml.frameWidth},\n`;
        code += `          frameAspectRatio: "${ml.frameAspectRatio}"\n`;
        code += `        }\n      },\n\n`;

        // Artwork
        code += `      artwork: {\n`;
        code += `        price: ${config.artwork.price},\n`;
        code += `        edition: "${config.artwork.edition}"\n`;
        code += `      }\n`;
        code += `    };  // END DEFAULT_CONFIG`;

        return code;
      };

      const copyToClipboard = (text) => {
        navigator.clipboard.writeText(text).then(() => {
          alert('‰ª£Á¢ºÂ∑≤Ë§áË£ΩÂà∞Ââ™Ë≤ºÁ∞øÔºÅ');
        }).catch(() => {
          alert('Ë§áË£ΩÂ§±ÊïóÔºåË´ãÊâãÂãïÈÅ∏ÂèñË§áË£Ω');
        });
      };

      const exitEditMode = () => {
        setIsEditMode(false);
        setSelectedElement(null);
      };

      // YouTube URL parser
      const getYouTubeVideoId = (url) => {
        if (!url) return null;
        const patterns = [
          /(?:youtube\.com\/shorts\/)([^?&]+)/,
          /(?:youtube\.com\/watch\?v=)([^&]+)/,
          /(?:youtu\.be\/)([^?&]+)/,
          /(?:youtube\.com\/embed\/)([^?&]+)/
        ];
        for (const pattern of patterns) {
          const match = url.match(pattern);
          if (match) return match[1];
        }
        return null;
      };

      const getMediaType = (url) => {
        if (!url) return 'image';
        const youtubeId = getYouTubeVideoId(url);
        if (youtubeId) return 'youtube';
        if (deviceConfig.layout.isMediaVideo) return 'video';
        return 'image';
      };

      const handleBackgroundClick = () => {
        if (selectedElement) {
          setSelectedElement(null);
        }
      };

      // Content wrapper - applies mobile preview frame in edit mode
      const ContentWrapper = ({ children }) => {
        if (isEditMode && deviceMode === 'mobile') {
          return (
            <div className="mobile-preview-container">
              {children}
            </div>
          );
        }
        return children;
      };

      return (
        <div className={`relative min-h-screen ${isEditMode ? 'edit-mode' : ''}`} onClick={handleBackgroundClick}>
          <LiquidBackground />

          {/* Edit Mode Banner */}
          {isEditMode && (
            <div className="edit-mode-banner">
              <span>Á∑®ËºØÊ®°Âºè</span>

              {/* Device Switcher */}
              <div className="device-switcher">
                <button
                  onClick={() => { setDeviceMode('desktop'); setSelectedElement(null); }}
                  className={deviceMode === 'desktop' ? 'active' : ''}
                >
                  üíª ÈõªËÖ¶Áâà
                </button>
                <button
                  onClick={() => { setDeviceMode('mobile'); setSelectedElement(null); }}
                  className={deviceMode === 'mobile' ? 'active' : ''}
                >
                  üì± ÊâãÊ©üÁâà
                </button>
              </div>

              <button
                onClick={saveConfig}
                className="px-4 py-1 bg-white text-purple-600 rounded text-xs font-bold hover:bg-gray-100"
              >
                ÂÑ≤Â≠ò
              </button>
              <button
                onClick={() => setIsExportModalOpen(true)}
                className="px-4 py-1 bg-green-500 text-white rounded text-xs font-bold hover:bg-green-600"
              >
                ÂåØÂá∫
              </button>
              <button
                onClick={exitEditMode}
                className="px-4 py-1 bg-black/30 rounded text-xs font-bold hover:bg-black/50"
              >
                ÈÄÄÂá∫
              </button>
            </div>
          )}

          {/* Language Switcher */}
          <div className={`fixed ${isEditMode ? 'top-16' : 'top-8'} right-8 z-40 flex gap-2`}>
            <button
              onClick={() => setLang(l => l === 'en' ? 'zh' : 'en')}
              className="glass-morphism px-3 py-1 text-[10px] font-bold uppercase tracking-widest hover:bg-white hover:text-black transition-all border border-white/20"
            >
              {lang === 'en' ? 'ZH' : 'EN'}
            </button>
          </div>

          {/* Main Content */}
          <ContentWrapper>
            <main className={`relative z-10 container mx-auto px-6 ${isEditMode ? 'pt-20' : 'pt-12'} pb-12 flex flex-col items-center min-h-screen`}>

              {/* Navigation */}
              <nav className="w-full flex justify-between items-center mb-16">
                <div className="font-black italic tracking-tighter opacity-80">
                  <EditableText
                    elementKey="navBrand"
                    config={config}
                    deviceMode={activeDevice}
                    isEditMode={isEditMode}
                    isSelected={selectedElement === 'navBrand'}
                    onSelect={handleElementSelect}
                    lang={lang}
                  />
                </div>
                <div className="flex gap-8 uppercase tracking-[0.2em] font-bold">
                  <button className="hover:text-white transition-colors">
                    <EditableText
                      elementKey="navLink1"
                      config={config}
                      deviceMode={activeDevice}
                      isEditMode={isEditMode}
                      isSelected={selectedElement === 'navLink1'}
                      onSelect={handleElementSelect}
                      lang={lang}
                    />
                  </button>
                  <button className="hover:text-white transition-colors">
                    <EditableText
                      elementKey="navLink2"
                      config={config}
                      deviceMode={activeDevice}
                      isEditMode={isEditMode}
                      isSelected={selectedElement === 'navLink2'}
                      onSelect={handleElementSelect}
                      lang={lang}
                    />
                  </button>
                  {!isEditMode && (
                    <button
                      onClick={handleAdminInit}
                      className="px-4 py-1 border border-zinc-700 hover:bg-white hover:text-black transition-all text-[10px]"
                    >
                      System.init()
                    </button>
                  )}
                </div>
              </nav>

              {/* Hero Section */}
              <section className="flex flex-col items-center text-center max-w-5xl w-full mb-24">
                <h1 className="mb-4 leading-none">
                  <EditableText
                    elementKey="heroTitle"
                    config={config}
                    deviceMode={activeDevice}
                    isEditMode={isEditMode}
                    isSelected={selectedElement === 'heroTitle'}
                    onSelect={handleElementSelect}
                    lang={lang}
                    className="font-black"
                  />
                </h1>
                <p className="mb-12 uppercase tracking-[0.4em]">
                  <EditableText
                    elementKey="heroSubtitle"
                    config={config}
                    deviceMode={activeDevice}
                    isEditMode={isEditMode}
                    isSelected={selectedElement === 'heroSubtitle'}
                    onSelect={handleElementSelect}
                    lang={lang}
                  />
                </p>

                {/* Media Display */}
                <div
                  className="relative glass-morphism overflow-hidden rounded-sm group cursor-crosshair"
                  style={{
                    width: `${deviceConfig.layout.frameWidth}%`,
                    aspectRatio: deviceConfig.layout.frameAspectRatio
                  }}
                >
                  <div className="absolute inset-0 bg-gradient-to-t from-black/80 to-transparent z-[2] pointer-events-none"></div>
                  <div className="absolute inset-0 border-[0.5px] border-white/10 z-[3] pointer-events-none"></div>

                  {(() => {
                    const mediaType = getMediaType(deviceConfig.layout.mediaUrl);
                    const youtubeId = getYouTubeVideoId(deviceConfig.layout.mediaUrl);
                    const scale = (deviceConfig.layout.videoScale || 100) / 100;
                    const offsetX = deviceConfig.layout.videoOffsetX || 0;
                    const offsetY = deviceConfig.layout.videoOffsetY || 0;

                    if (mediaType === 'youtube' && youtubeId) {
                      return (
                        <div className="absolute inset-0 overflow-hidden">
                          <iframe
                            src={`https://www.youtube.com/embed/${youtubeId}?autoplay=1&mute=1&loop=1&playlist=${youtubeId}&controls=0&showinfo=0&rel=0&modestbranding=1&iv_load_policy=3&disablekb=1`}
                            className="absolute"
                            style={{
                              border: 'none',
                              pointerEvents: isEditMode ? 'none' : 'auto',
                              width: '100%',
                              height: '100%',
                              transform: `scale(${scale}) translate(${offsetX}px, ${offsetY}px)`,
                              transformOrigin: 'center center',
                              top: 0,
                              left: 0
                            }}
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                            allowFullScreen
                          />
                        </div>
                      );
                    } else if (mediaType === 'video') {
                      return (
                        <video
                          src={deviceConfig.layout.mediaUrl}
                          autoPlay loop muted playsInline
                          className="w-full h-full object-cover grayscale contrast-125 opacity-70 group-hover:grayscale-0 group-hover:opacity-100 transition-all duration-700"
                          style={{
                            transform: `scale(${scale}) translate(${offsetX}px, ${offsetY}px)`,
                            transformOrigin: 'center center'
                          }}
                        />
                      );
                    } else {
                      return (
                        <img
                          src={deviceConfig.layout.mediaUrl}
                          className="w-full h-full object-cover grayscale contrast-125 opacity-70 group-hover:grayscale-0 group-hover:opacity-100 transition-all duration-700"
                          style={{
                            transform: `scale(${scale}) translate(${offsetX}px, ${offsetY}px)`,
                            transformOrigin: 'center center'
                          }}
                          alt="Artwork"
                        />
                      );
                    }
                  })()}

                  <div className="absolute bottom-8 left-8 z-[5] text-left">
                    <div className="text-[9px] text-white/40 uppercase mb-1 tracking-widest">fragment_id</div>
                    <div className="display-font text-lg font-bold tracking-tighter">PROTO-GENESIS_01</div>
                  </div>

                  <div className="absolute top-8 right-8 z-[5] flex items-center gap-2">
                    <div className="w-2 h-2 rounded-full bg-red-500 animate-pulse"></div>
                    <span className="text-[9px] tracking-widest opacity-60 uppercase">Live_Render</span>
                  </div>

                  {/* Edit media controls */}
                  {isEditMode && (
                    <div className="absolute bottom-4 right-4 z-[5] flex flex-col gap-2" onClick={e => e.stopPropagation()}>
                      <div className="glass-morphism p-3 rounded-lg space-y-2">
                        <div className="text-[9px] text-zinc-400 uppercase tracking-wider mb-2">
                          Â™íÈ´îË™øÊï¥ ({deviceMode === 'desktop' ? 'ÈõªËÖ¶Áâà' : 'ÊâãÊ©üÁâà'})
                        </div>

                        {/* Frame Size */}
                        <div className="flex items-center gap-2">
                          <span className="text-[10px] text-zinc-500 w-14">Ê°ÜÂØ¨Â∫¶</span>
                          <input
                            type="range"
                            min="50"
                            max="100"
                            value={deviceConfig.layout.frameWidth}
                            onChange={e => updateLayout(deviceMode, { frameWidth: parseInt(e.target.value) })}
                            className="flex-1 accent-blue-500"
                          />
                          <span className="text-[10px] text-zinc-400 w-10">{deviceConfig.layout.frameWidth}%</span>
                        </div>

                        {/* Aspect Ratio */}
                        <div className="flex items-center gap-2">
                          <span className="text-[10px] text-zinc-500 w-14">ÊØî‰æã</span>
                          <select
                            value={deviceConfig.layout.frameAspectRatio}
                            onChange={e => updateLayout(deviceMode, { frameAspectRatio: e.target.value })}
                            className="flex-1 bg-black/60 border border-zinc-700 rounded px-2 py-1 text-[10px]"
                          >
                            <option value="21/9">21:9 ÂØ¨ÈäÄÂπï</option>
                            <option value="16/9">16:9 Ê®ôÊ∫ñ</option>
                            <option value="4/3">4:3 ÂÇ≥Áµ±</option>
                            <option value="1/1">1:1 ÊñπÂΩ¢</option>
                            <option value="9/16">9:16 Áõ¥Âºè</option>
                          </select>
                        </div>

                        {/* Video Scale */}
                        <div className="flex items-center gap-2">
                          <span className="text-[10px] text-zinc-500 w-14">Á∏ÆÊîæ</span>
                          <input
                            type="range"
                            min="100"
                            max="200"
                            value={deviceConfig.layout.videoScale || 100}
                            onChange={e => updateLayout(deviceMode, { videoScale: parseInt(e.target.value) })}
                            className="flex-1 accent-blue-500"
                          />
                          <span className="text-[10px] text-zinc-400 w-10">{deviceConfig.layout.videoScale || 100}%</span>
                        </div>

                        {/* Video Offset X */}
                        <div className="flex items-center gap-2">
                          <span className="text-[10px] text-zinc-500 w-14">X ÂÅèÁßª</span>
                          <input
                            type="range"
                            min="-100"
                            max="100"
                            value={deviceConfig.layout.videoOffsetX || 0}
                            onChange={e => updateLayout(deviceMode, { videoOffsetX: parseInt(e.target.value) })}
                            className="flex-1 accent-blue-500"
                          />
                          <span className="text-[10px] text-zinc-400 w-10">{deviceConfig.layout.videoOffsetX || 0}px</span>
                        </div>

                        {/* Video Offset Y */}
                        <div className="flex items-center gap-2">
                          <span className="text-[10px] text-zinc-500 w-14">Y ÂÅèÁßª</span>
                          <input
                            type="range"
                            min="-100"
                            max="100"
                            value={deviceConfig.layout.videoOffsetY || 0}
                            onChange={e => updateLayout(deviceMode, { videoOffsetY: parseInt(e.target.value) })}
                            className="flex-1 accent-blue-500"
                          />
                          <span className="text-[10px] text-zinc-400 w-10">{deviceConfig.layout.videoOffsetY || 0}px</span>
                        </div>

                        <button
                          onClick={() => updateLayout(deviceMode, {
                            videoScale: 100,
                            videoOffsetX: 0,
                            videoOffsetY: 0,
                            frameWidth: 100,
                            frameAspectRatio: deviceMode === 'desktop' ? '21/9' : '16/9'
                          })}
                          className="w-full mt-1 py-1 text-[9px] border border-zinc-700 rounded hover:bg-zinc-800 text-zinc-400"
                        >
                          ÈáçÁΩÆ
                        </button>
                      </div>

                      <button
                        onClick={(e) => {
                          e.stopPropagation();
                          const url = prompt('Ëº∏ÂÖ•Â™íÈ´î URL:\n\nÊîØÊè¥Ê†ºÂºè:\n‚Ä¢ ÂúñÁâáÁ∂≤ÂùÄ\n‚Ä¢ ÂΩ±ÁâáÁ∂≤ÂùÄ\n‚Ä¢ YouTube ÈÄ£Áµê', deviceConfig.layout.mediaUrl);
                          if (url) {
                            const isYouTube = getYouTubeVideoId(url) !== null;
                            let isVideo = isYouTube;
                            if (!isYouTube) {
                              isVideo = confirm('ÈÄôÊòØÂΩ±ÁâáÊ™îÊ°àÂóéÔºü');
                            }
                            updateLayout(deviceMode, { mediaUrl: url, isMediaVideo: isVideo });
                          }
                        }}
                        className="px-3 py-2 bg-blue-600 text-white text-xs rounded hover:bg-blue-700 font-bold"
                      >
                        Êõ¥ÊèõÂ™íÈ´î
                      </button>
                    </div>
                  )}
                </div>
              </section>

              {/* Order Section */}
              <section className="w-full max-w-4xl glass-morphism p-12 mb-24 relative overflow-hidden">
                <div className="absolute top-0 right-0 p-4 opacity-10 pointer-events-none">
                  <svg width="200" height="200" viewBox="0 0 100 100">
                    <circle cx="50" cy="50" r="40" fill="none" stroke="white" strokeWidth="0.5" strokeDasharray="2 2" />
                    <path d="M10 50 L90 50 M50 10 L50 90" stroke="white" strokeWidth="0.5" />
                  </svg>
                </div>

                <div className="grid grid-cols-1 md:grid-cols-2 gap-12 items-center">
                  <div>
                    <h2 className="mb-6 italic font-bold">
                      <EditableText
                        elementKey="orderTitle"
                        config={config}
                        deviceMode={activeDevice}
                        isEditMode={isEditMode}
                        isSelected={selectedElement === 'orderTitle'}
                        onSelect={handleElementSelect}
                        lang={lang}
                      />
                    </h2>
                    <p className="mb-8 font-light italic leading-relaxed">
                      <EditableText
                        elementKey="orderDescription"
                        config={config}
                        deviceMode={activeDevice}
                        isEditMode={isEditMode}
                        isSelected={selectedElement === 'orderDescription'}
                        onSelect={handleElementSelect}
                        lang={lang}
                      />
                    </p>
                    <div className="flex items-center gap-8 mb-8 border-y border-zinc-800 py-6">
                      <div>
                        <div className="text-[9px] text-zinc-500 uppercase tracking-widest mb-1">{lang === 'en' ? 'Valuation' : '‰º∞ÂÄº'}</div>
                        <div className="display-font text-xl font-black">
                          {isEditMode ? (
                            <input
                              type="number"
                              step="0.01"
                              value={config.artwork.price}
                              onChange={e => setConfig(prev => ({ ...prev, artwork: { ...prev.artwork, price: parseFloat(e.target.value) || 0 } }))}
                              onClick={e => e.stopPropagation()}
                              className="bg-transparent border-b border-zinc-600 w-20 focus:outline-none focus:border-blue-500"
                            />
                          ) : config.artwork.price} ETH
                        </div>
                      </div>
                      <div>
                        <div className="text-[9px] text-zinc-500 uppercase tracking-widest mb-1">{lang === 'en' ? 'Edition' : 'ÁâàÊú¨'}</div>
                        <div className="display-font text-xl font-black">
                          {isEditMode ? (
                            <input
                              type="text"
                              value={config.artwork.edition}
                              onChange={e => setConfig(prev => ({ ...prev, artwork: { ...prev.artwork, edition: e.target.value } }))}
                              onClick={e => e.stopPropagation()}
                              className="bg-transparent border-b border-zinc-600 w-20 focus:outline-none focus:border-blue-500"
                            />
                          ) : config.artwork.edition}
                        </div>
                      </div>
                    </div>
                  </div>

                  <div className="space-y-4">
                    <div className="bg-black/50 border border-zinc-800 p-4">
                      <label className="text-[9px] text-zinc-600 block mb-2 uppercase tracking-[0.2em]">{lang === 'en' ? 'Collector_Identifier' : 'Êî∂ËóèÂÆ∂Ê®ôË≠òÁ¨¶'}</label>
                      <input type="text" placeholder={lang === 'en' ? "WALLET_ADDRESS_OR_EMAIL" : "Èå¢ÂåÖÂú∞ÂùÄÊàñÈõªÂ≠êÈÉµ‰ª∂"} className="w-full bg-transparent border-b border-zinc-700 py-2 text-xs focus:outline-none focus:border-white transition-colors" />
                    </div>
                    <button
                      className="w-full py-6 font-black uppercase transition-all relative group overflow-hidden editable-element"
                      style={{
                        backgroundColor: deviceConfig.elements.ctaButton.bgColor,
                        color: deviceConfig.elements.ctaButton.color,
                        fontSize: `${deviceConfig.elements.ctaButton.fontSize}px`,
                        fontFamily: lang === 'zh' ? deviceConfig.elements.ctaButton.fontFamilyZh : deviceConfig.elements.ctaButton.fontFamily,
                        letterSpacing: '0.5em',
                        transform: `translate(${deviceConfig.elements.ctaButton.offsetX}px, ${deviceConfig.elements.ctaButton.offsetY}px)`
                      }}
                      onClick={(e) => {
                        if (isEditMode) {
                          e.stopPropagation();
                          const rect = e.target.getBoundingClientRect();
                          handleElementSelect('ctaButton', { x: rect.left, y: rect.bottom + 10 });
                        }
                      }}
                    >
                      <span className="relative z-10">{lang === 'zh' ? config.texts.ctaButton.zh : config.texts.ctaButton.en}</span>
                      <div className="absolute inset-0 bg-white translate-y-full group-hover:translate-y-0 transition-transform duration-300"></div>
                    </button>
                    <p className="text-[8px] text-center text-zinc-600 uppercase tracking-widest">
                      {lang === 'en' ? 'All sales are final. Transactions secured via smart contract.' : 'ÊâÄÊúâÈä∑ÂîÆÂùáÁÇ∫ÊúÄÁµÇÈä∑ÂîÆ„ÄÇ‰∫§ÊòìÈÄöÈÅéÊô∫ËÉΩÂêàÁ¥ÑÊìî‰øù„ÄÇ'}
                    </p>
                  </div>
                </div>
              </section>

              {/* Footer */}
              <footer className={`w-full border-t border-zinc-900 pt-12 pb-24 flex flex-col md:flex-row justify-between items-start gap-8 ${isEditMode ? '' : 'opacity-40'}`}>
                <div className="max-w-xs">
                  <div className="mb-4">
                    <EditableText
                      elementKey="footerBrand"
                      config={config}
                      deviceMode={activeDevice}
                      isEditMode={isEditMode}
                      isSelected={selectedElement === 'footerBrand'}
                      onSelect={handleElementSelect}
                      lang={lang}
                      className="font-bold"
                    />
                  </div>
                  <div className="leading-relaxed italic">
                    <EditableText
                      elementKey="footerDescription"
                      config={config}
                      deviceMode={activeDevice}
                      isEditMode={isEditMode}
                      isSelected={selectedElement === 'footerDescription'}
                      onSelect={handleElementSelect}
                      lang={lang}
                    />
                  </div>
                </div>
                <div className="grid grid-cols-2 gap-12 uppercase font-bold tracking-widest">
                  <div className="flex flex-col gap-2">
                    <a href="#" className="hover:text-white transition-colors">
                      <EditableText
                        elementKey="footerLink1"
                        config={config}
                        deviceMode={activeDevice}
                        isEditMode={isEditMode}
                        isSelected={selectedElement === 'footerLink1'}
                        onSelect={handleElementSelect}
                        lang={lang}
                      />
                    </a>
                    <a href="#" className="hover:text-white transition-colors">
                      <EditableText
                        elementKey="footerLink2"
                        config={config}
                        deviceMode={activeDevice}
                        isEditMode={isEditMode}
                        isSelected={selectedElement === 'footerLink2'}
                        onSelect={handleElementSelect}
                        lang={lang}
                      />
                    </a>
                    <a href="#" className="hover:text-white transition-colors">
                      <EditableText
                        elementKey="footerLink3"
                        config={config}
                        deviceMode={activeDevice}
                        isEditMode={isEditMode}
                        isSelected={selectedElement === 'footerLink3'}
                        onSelect={handleElementSelect}
                        lang={lang}
                      />
                    </a>
                  </div>
                  <div className="flex flex-col gap-2">
                    <a href="#" className="hover:text-white transition-colors">
                      <EditableText
                        elementKey="footerLink4"
                        config={config}
                        deviceMode={activeDevice}
                        isEditMode={isEditMode}
                        isSelected={selectedElement === 'footerLink4'}
                        onSelect={handleElementSelect}
                        lang={lang}
                      />
                    </a>
                    <a href="#" className="hover:text-white transition-colors">
                      <EditableText
                        elementKey="footerLink5"
                        config={config}
                        deviceMode={activeDevice}
                        isEditMode={isEditMode}
                        isSelected={selectedElement === 'footerLink5'}
                        onSelect={handleElementSelect}
                        lang={lang}
                      />
                    </a>
                    <a href="#" className="hover:text-white transition-colors">
                      <EditableText
                        elementKey="footerLink6"
                        config={config}
                        deviceMode={activeDevice}
                        isEditMode={isEditMode}
                        isSelected={selectedElement === 'footerLink6'}
                        onSelect={handleElementSelect}
                        lang={lang}
                      />
                    </a>
                  </div>
                </div>
              </footer>
            </main>
          </ContentWrapper>

          {/* Password Modal */}
          {isAuthModalOpen && (
            <div className="fixed inset-0 z-[100] flex items-center justify-center bg-black/90 backdrop-blur-sm">
              <form onSubmit={handlePasswordSubmit} className="glass-morphism p-8 w-80 text-center">
                <h3 className="display-font text-xs tracking-[0.3em] uppercase mb-6">Á≥ªÁµ±Ë∫´‰ªΩÈ©óË≠â</h3>
                <input
                  autoFocus
                  type="password"
                  placeholder="Ë´ãËº∏ÂÖ•ÂØÜÁ¢º"
                  value={passwordInput}
                  onChange={(e) => setPasswordInput(e.target.value)}
                  className="w-full bg-black border border-zinc-800 p-3 text-xs mb-4 focus:outline-none focus:border-zinc-500"
                />
                <div className="flex gap-2">
                  <button
                    type="button"
                    onClick={() => setIsAuthModalOpen(false)}
                    className="flex-1 py-2 text-[10px] border border-zinc-800 hover:bg-zinc-800 transition-colors"
                  >ÂèñÊ∂à</button>
                  <button
                    type="submit"
                    className="flex-1 py-2 text-[10px] bg-white text-black font-bold uppercase"
                  >ÈÄ≤ÂÖ•</button>
                </div>
              </form>
            </div>
          )}

          {/* Export Code Modal */}
          {isExportModalOpen && (
            <div className="fixed inset-0 z-[100] flex items-center justify-center bg-black/95 backdrop-blur-sm" onClick={() => setIsExportModalOpen(false)}>
              <div className="glass-morphism p-6 w-[90%] max-w-4xl max-h-[90vh] overflow-hidden flex flex-col" onClick={e => e.stopPropagation()}>
                <div className="flex justify-between items-center mb-4 pb-4 border-b border-zinc-700">
                  <h3 className="display-font text-sm tracking-[0.2em] uppercase text-green-400">ÂåØÂá∫Ë®≠ÂÆö‰ª£Á¢º</h3>
                  <button onClick={() => setIsExportModalOpen(false)} className="text-zinc-500 hover:text-white text-2xl leading-none">&times;</button>
                </div>

                <div className="bg-yellow-900/30 border border-yellow-600/50 rounded p-4 mb-4">
                  <h4 className="text-yellow-400 text-sm font-bold mb-2">‰ΩøÁî®Ë™™Êòé</h4>
                  <ol className="text-yellow-200/80 text-xs space-y-1 list-decimal list-inside">
                    <li>ÈªûÊìä‰∏ãÊñπ„ÄåË§áË£Ω‰ª£Á¢º„ÄçÊåâÈàïË§áË£ΩË®≠ÂÆö</li>
                    <li>ÊâìÈñãÊú¨Âú∞ÁöÑ <code className="bg-black/50 px-1 rounded">index.html</code> Êñá‰ª∂</li>
                    <li>ÊêúÂ∞ã <code className="bg-black/50 px-1 rounded">const DEFAULT_CONFIG = {'{'}</code></li>
                    <li>ÈÅ∏ÂèñÂæû <code className="bg-black/50 px-1 rounded">const DEFAULT_CONFIG = {'{'}</code> Âà∞ <code className="bg-black/50 px-1 rounded">{'}'};  // END DEFAULT_CONFIG</code> ÁöÑÊï¥ÊÆµ‰ª£Á¢º</li>
                    <li>Áî®Ë§áË£ΩÁöÑ‰ª£Á¢ºÂèñ‰ª£ÈÅ∏ÂèñÁöÑÈÉ®ÂàÜ</li>
                    <li>ÂÑ≤Â≠òÊñá‰ª∂‰∏¶Êé®ÈÄÅÂà∞ GitHub</li>
                  </ol>
                </div>

                <div className="flex gap-2 mb-4">
                  <button
                    onClick={() => copyToClipboard(generateExportCode())}
                    className="px-6 py-2 bg-green-600 text-white rounded text-sm font-bold hover:bg-green-700 flex items-center gap-2"
                  >
                    <span>&#128203;</span> Ë§áË£Ω‰ª£Á¢º
                  </button>
                  <button
                    onClick={() => {
                      const blob = new Blob([generateExportCode()], { type: 'text/javascript' });
                      const url = URL.createObjectURL(blob);
                      const a = document.createElement('a');
                      a.href = url;
                      a.download = 'config-export.js';
                      a.click();
                      URL.revokeObjectURL(url);
                    }}
                    className="px-6 py-2 bg-blue-600 text-white rounded text-sm font-bold hover:bg-blue-700 flex items-center gap-2"
                  >
                    <span>&#128190;</span> ‰∏ãËºâÊ™îÊ°à
                  </button>
                </div>

                <div className="flex-1 overflow-auto bg-black/60 rounded border border-zinc-700">
                  <pre className="p-4 text-xs text-green-300 font-mono whitespace-pre overflow-x-auto">
                    {generateExportCode()}
                  </pre>
                </div>
              </div>
            </div>
          )}

          {/* Floating Toolbar */}
          {isEditMode && selectedElement && (
            <FloatingToolbar
              elementKey={selectedElement}
              config={config}
              deviceMode={deviceMode}
              updateElement={updateElement}
              updateText={updateText}
              position={toolbarPosition}
              onClose={handleCloseToolbar}
              lang={lang}
            />
          )}

          {/* Admin Button */}
          {!isEditMode && (
            <button
              onClick={handleAdminInit}
              className="fixed bottom-8 right-8 z-40 w-12 h-12 rounded-full glass-morphism border border-white/20 flex items-center justify-center hover:scale-110 transition-transform bg-black"
            >
              <span className="text-xl">&#9881;</span>
            </button>
          )}
        </div>
      );
    };

    // Render
    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>
